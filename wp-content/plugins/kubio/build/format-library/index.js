(()=>{var e={5251:(e,t,o)=>{"use strict";var n=o(9196),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,o){var n,i={},c=null,u=null;for(n in void 0!==o&&(c=""+o),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)l.call(t,n)&&!s.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:r,type:e,key:c,ref:u,props:i,_owner:a.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},5893:(e,t,o)=>{"use strict";e.exports=o(5251)},9196:e=>{"use strict";e.exports=window.React},3967:(e,t)=>{var o;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var o=arguments[t];o&&(e=l(e,i(o)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var o in e)n.call(e,o)&&e[o]&&(t=l(t,o));return t}function l(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(o=function(){return r}.apply(t,[]))||(e.exports=o)}()}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";o.r(n),o.d(n,{CustomFormatsToolbar:()=>I});const e=window.wp.richText,t=window.kubio.globalData,r=window.wp.blockEditor,i=window.wp.element,l=window.wp.i18n,a=(0,i.forwardRef)((function({icon:e,size:t=24,...o},n){return(0,i.cloneElement)(e,{width:t,height:t,...o,ref:n})})),s=window.wp.primitives;var c=o(5893);const u=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"M12.9 6h-2l-4 11h1.9l1.1-3h4.2l1.1 3h1.9L12.9 6zm-2.5 6.5l1.5-4.9 1.7 4.9h-3.2z"})});function d(t,o,n){const r=(0,e.getActiveFormat)(n,o);if(!r)return;const i=r.attributes.style;if(i){var l,a;const e=new RegExp(`${t}:(.*?)(;|$)`);return null===(l=i.match(e))||void 0===l||null===(a=l[1])||void 0===a?void 0:a.trim()}}const f=e=>{var t,o,n;return(null===(t=e.current)||void 0===t||null===(o=t.closest("[data-type]"))||void 0===o||null===(n=o.getAttribute("data-type"))||void 0===n?void 0:n.startsWith("kubio/"))||!1},m=window.kubio.controls,p=window.kubio.utils,v=window.wp.components,b=(0,p.wpVersionCompare)("6.4","<"),h=({contentRef:t,settings:o,value:n})=>{const r={};if(b){const i=(0,e.useAnchorRef)({ref:t,value:n,settings:o});r.anchorRef=((e,t)=>{const o=!!((null==e?void 0:e.endOffset)-(null==e?void 0:e.startOffset)),n=e&&void 0===(null==e?void 0:e.endOffset);let r=t.current;return(n||o)&&(r=e),r})(i,t)}else{const i=(0,e.useAnchor)({editableContentElement:t.current,value:n,settings:o});r.anchor=i}return{popoverOptions:r}};function x({name:t,value:o,onChange:n,onClose:r,contentRef:l,onReset:a,currentColor:s,formatValue:u}){const d=(0,i.useRef)(),f=(0,i.useCallback)((e=>{const t=null==e?void 0:e.target,o=d.current;t&&null!=o&&o.contains(t)||r()}),[d.current,r]);(0,p.useOnClickOutside)(d,f);const{popoverOptions:b}=h({contentRef:l,settings:w,value:o});return(0,c.jsx)(v.__experimentalStyleProvider,{document,children:(0,c.jsx)(v.Popover,{value:o,className:"kubio-components-inline-color-popover kubio-color-popover",position:"bottom center",placement:"bottom",...b,children:(0,c.jsx)("div",{ref:d,children:(0,c.jsx)(m.GutentagColorPickerWithPalette,{defaultValue:s,onChange:r=>n((0,e.applyFormat)(o,{type:t,attributes:{style:`color:${r}`}}),r),hasButton:!0,onButtonClick:a})})})})}const g=window.lodash;var _=o.n(g);const y="kubio/text-color",k=(0,l.__)("Text color","kubio"),w={name:y,title:k,tagName:"span",className:"kubio-has-inline-color",attributes:{style:"style"},edit:function({value:o,onChange:n,isActive:l,activeAttributes:s,contentRef:d}){const[m,p]=(0,i.useState)(!1),{parseVariableColor:v}=(0,t.useGlobalDataColors)(),b=(0,i.useCallback)((()=>{p(!0)}),[]),h=(0,i.useCallback)((()=>{p(!1)}),[]),[g,_]=(0,i.useState)(null);(0,i.useEffect)((()=>{_(function(t,o){const n=(0,e.getActiveFormat)(o,t);if(!n)return;const r=n.attributes.style;var i,l;return r?null===(i=r.match(/color:(.*?)(;|$)/))||void 0===i||null===(l=i[1])||void 0===l?void 0:l.trim():void 0}(y,o))}),[]);const w=(0,i.useMemo)((()=>{if(g)return{backgroundColor:v(g)}}),[g,v]),j=((null==o?void 0:o.activeFormats)||[]).length,F=(0,i.useMemo)((()=>j>0?Math.random():0),[j]);return f(d)?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.RichTextToolbarButton,{className:"kubio-format-library-text-color-button",name:l?"italic":void 0,icon:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a,{icon:u}),l&&(0,c.jsx)("span",{className:"kubio-format-library-text-color-button__indicator",style:w})]}),title:k,onClick:b},l?"text-color":"text-color-not-active"),m&&(0,c.jsx)(x,{name:y,onClose:h,activeAttributes:s,value:o,currentColor:g,onChange:(e,t)=>{_(t),n(e)},onReset:()=>{n((0,e.removeFormat)(o,y)),h()},contentRef:d},F)]}):(0,c.jsx)(c.Fragment,{})}},j=({name:e,children:t,...o})=>{let n="RichText.ToolbarControls";return e&&(n+=`.${e}`),(0,c.jsx)(v.Fill,{name:n,children:t})},F=window.kubio.core,C=window.kubio.icons,R=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"M6.9 7L3 17.8h1.7l1-2.8h4.1l1 2.8h1.7L8.6 7H6.9zm-.7 6.6l1.5-4.3 1.5 4.3h-3zM21.6 17c-.1.1-.2.2-.3.2-.1.1-.2.1-.4.1s-.3-.1-.4-.2c-.1-.1-.1-.3-.1-.6V12c0-.5 0-1-.1-1.4-.1-.4-.3-.7-.5-1-.2-.2-.5-.4-.9-.5-.4 0-.8-.1-1.3-.1s-1 .1-1.4.2c-.4.1-.7.3-1 .4-.2.2-.4.3-.6.5-.1.2-.2.4-.2.7 0 .3.1.5.2.8.2.2.4.3.8.3.3 0 .6-.1.8-.3.2-.2.3-.4.3-.7 0-.3-.1-.5-.2-.7-.2-.2-.4-.3-.6-.4.2-.2.4-.3.7-.4.3-.1.6-.1.8-.1.3 0 .6 0 .8.1.2.1.4.3.5.5.1.2.2.5.2.9v1.1c0 .3-.1.5-.3.6-.2.2-.5.3-.9.4-.3.1-.7.3-1.1.4-.4.1-.8.3-1.1.5-.3.2-.6.4-.8.7-.2.3-.3.7-.3 1.2 0 .6.2 1.1.5 1.4.3.4.9.5 1.6.5.5 0 1-.1 1.4-.3.4-.2.8-.6 1.1-1.1 0 .4.1.7.3 1 .2.3.6.4 1.2.4.4 0 .7-.1.9-.2.2-.1.5-.3.7-.4h-.3zm-3-.9c-.2.4-.5.7-.8.8-.3.2-.6.2-.8.2-.4 0-.6-.1-.9-.3-.2-.2-.3-.6-.3-1.1 0-.5.1-.9.3-1.2s.5-.5.8-.7c.3-.2.7-.3 1-.5.3-.1.6-.3.7-.6v3.4z"})});var O=o(3967),S=o.n(O);const P=[{label:(0,l.__)("100 (thin)","kubio"),value:100},{label:(0,l.__)("200 (extra light)","kubio"),value:200},{label:(0,l.__)("300 (light)","kubio"),value:300},{label:(0,l.__)("400 (normal)","kubio"),value:400},{label:(0,l.__)("500 (medium)","kubio"),value:500},{label:(0,l.__)("600 (semi bold)","kubio"),value:600},{label:(0,l.__)("700 (bold)","kubio"),value:700},{label:(0,l.__)("800 (extra bold)","kubio"),value:800},{label:(0,l.__)("900 (heavy)","kubio"),value:900}],N=({isActive:e,value:o,onChange:n,onReset:r,contentRef:l,formatValue:a})=>{var s;const{getFontWeights:u}=(0,t.useGlobalDataFonts)(),[d,f]=(0,i.useState)(!1),m=(0,i.useRef)(),v=_().get(o,"fontFamily"),b=_().get(o,"fontWeight"),h=u(v),x=(0,F.useDeepMemo)((()=>P.filter((({value:e})=>-1!==h.indexOf(e)))),[h]),g={value:v,onChange:e=>{const t=u(e).some((e=>e===b));t?n("fontFamily",e):n("",{fontFamily:e,fontWeight:400})}},y={value:b,onChange:e=>{n("fontWeight",e)},options:x,onReset:r},[k,w]=(0,i.useState)(Math.random()),j=(0,i.useCallback)((e=>{const t=null==e?void 0:e.target,o=t&&t.closest(".block-editor-rich-text__inline-font-family, .h-select-control__popover, .kubio-fontpicker-content"),n=m.current;null!=n&&n.contains(t)||o||f(!1)}),[]);(0,p.useOnClickOutside)(m,j);const C=null==l||null===(s=l.current)||void 0===s?void 0:s.tagName;return(0,i.useEffect)((()=>{C&&w(Math.random())}),[C]),(0,c.jsx)(T,{contentRef:l,fontFamilyWeight:B,value:o,isActive:e,onTogglePopover:()=>{f((e=>!e))},isPopoverVisible:d,setPopoverVisibility:f,fontFamily:g,fontWeight:y,onReset:r,popperRef:m},k)},T=({contentRef:e,fontFamilyWeight:t,value:o,isActive:n,onTogglePopover:r,isPopoverVisible:i,setPopoverVisibility:a,fontFamily:s,fontWeight:u,onReset:d,popperRef:f})=>{const{popoverOptions:p}=h({contentRef:e,settings:t,value:o});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(v.ToolbarButton,{className:S()({"is-pressed":n}),icon:R,onClick:r,label:(0,l.__)("Typography","kubio")}),i&&(0,c.jsx)(v.__experimentalStyleProvider,{document,children:(0,c.jsx)(v.Popover,{className:"block-editor-rich-text__inline-font-family",onFocusOutside:()=>a(!1),position:"bottom center",placement:"bottom",...p,children:(0,c.jsx)("div",{ref:f,className:"block-editor-rich-text__inline-format-toolbar block-editor-rich-text__inline-font-family kubio-options-popover ",children:(0,c.jsxs)("div",{className:"block-editor-rich-text__typography-toolbar__container",children:[(0,c.jsx)(v.BaseControl,{children:(0,c.jsxs)(v.Flex,{className:"kubio-font-family-container",children:[(0,c.jsx)(v.FlexBlock,{children:(0,c.jsx)("span",{className:"kubio-font-family-label",children:(0,l.__)("Font family","kubio")})}),(0,c.jsx)(v.FlexItem,{children:(0,c.jsx)(m.FontPicker,{label:(0,l.__)("Font family","kubio"),placeholder:(0,l.__)("Inherited","kubio"),allowReset:!1,...s})}),(0,c.jsx)(v.FlexItem,{className:"kubio-font-family__reset",children:(0,c.jsx)(v.Button,{isSmall:!0,icon:C.ResetIcon,label:(0,l.__)("Reset","kubio"),className:"kubio-popover-options-icon",onClick:d})})]})}),(0,c.jsx)(v.BaseControl,{children:(0,c.jsx)(m.GutentagSelectControl,{label:(0,l.__)("Font weight","kubio"),placeholder:(0,l.__)("Inherited","kubio"),allowReset:!0,...u})})]})})})})]})},A="font-family-weight",E=(0,l.__)("Font","kubio"),W=`kubio/${A}`,B={name:W,title:E,slotId:A,tagName:"span",className:`kubio-has-inline-${A}`,attributes:{style:"style"},edit:t=>{const{value:o,onChange:n,contentRef:r}=t,{isActive:l}=t,[a,s]=(0,i.useState)(""),u=d("font-family",W,o),m=function(e,t){let o=d("font-weight",e,t);return isNaN(o)||(o=parseFloat(o)),o}(W,o);(0,i.useEffect)((()=>{s(Math.random())}),[o]);const p={fontFamily:u,fontWeight:m};return f(r)?(0,c.jsx)(j,{name:A,children:(0,c.jsx)(N,{formatValue:o,onChange:(t,r)=>{let i=window.structuredClone(p);t?_().set(i,t,r):i=r,(({fontFamily:t,fontWeight:r})=>{const i=[];t&&i.push(`font-family: ${t}`),r&&i.push(`font-weight: ${r}`);const l=i.join(";");n((0,e.applyFormat)(o,{type:W,attributes:{style:l}}))})(i)},value:p,isActive:l,onReset:()=>{n((0,e.removeFormat)(o,W))},contentRef:r},a)}):(0,c.jsx)(c.Fragment,{})}},M=[B],V=M.map((e=>e.slotId)).filter(Boolean),$=()=>(0,c.jsx)(c.Fragment,{children:V.map((e=>(0,c.jsx)(v.Slot,{name:`RichText.ToolbarControls.${e}`},e)))}),I=e=>{const{addWrapper:t=!0}=e;return!0===t?(0,c.jsx)(r.BlockControls,{children:(0,c.jsx)($,{})}):(0,c.jsx)($,{})};let z=[w];z=z.concat(M),z.forEach((({name:t,...o})=>{(0,e.registerFormatType)(t,o)}))})(),(window.kubio=window.kubio||{}).formatLibrary=n})();
