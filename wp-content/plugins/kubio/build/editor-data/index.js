(()=>{var e={9590:e=>{var t="undefined"!=typeof Element,r="function"==typeof Map,n="function"==typeof Set,o="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function s(e,u){if(e===u)return!0;if(e&&u&&"object"==typeof e&&"object"==typeof u){if(e.constructor!==u.constructor)return!1;var i,a,c,l;if(Array.isArray(e)){if((i=e.length)!=u.length)return!1;for(a=i;0!=a--;)if(!s(e[a],u[a]))return!1;return!0}if(r&&e instanceof Map&&u instanceof Map){if(e.size!==u.size)return!1;for(l=e.entries();!(a=l.next()).done;)if(!u.has(a.value[0]))return!1;for(l=e.entries();!(a=l.next()).done;)if(!s(a.value[1],u.get(a.value[0])))return!1;return!0}if(n&&e instanceof Set&&u instanceof Set){if(e.size!==u.size)return!1;for(l=e.entries();!(a=l.next()).done;)if(!u.has(a.value[0]))return!1;return!0}if(o&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(u)){if((i=e.length)!=u.length)return!1;for(a=i;0!=a--;)if(e[a]!==u[a])return!1;return!0}if(e.constructor===RegExp)return e.source===u.source&&e.flags===u.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===u.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===u.toString();if((i=(c=Object.keys(e)).length)!==Object.keys(u).length)return!1;for(a=i;0!=a--;)if(!Object.prototype.hasOwnProperty.call(u,c[a]))return!1;if(t&&e instanceof Element)return!1;for(a=i;0!=a--;)if(("_owner"!==c[a]&&"__v"!==c[a]&&"__o"!==c[a]||!e.$$typeof)&&!s(e[c[a]],u[c[a]]))return!1;return!0}return e!=e&&u!=u}e.exports=function(e,t){try{return s(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},5251:(e,t,r)=>{"use strict";var n=r(9196),o=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,r){var n,a={},c=null,l=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,n)&&!i.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:o,type:e,key:c,ref:l,props:a,_owner:u.current}}},5893:(e,t,r)=>{"use strict";e.exports=r(5251)},4670:(e,t,r)=>{"use strict";e.exports=r(5607)},9829:(e,t,r)=>{"use strict";var n,o,s,u=r(8946),i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function a(){s=!1}function c(e){if(e){if(e!==n){if(e.length!==i.length)throw new Error("Custom alphabet for shortid must be "+i.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,r){return t!==r.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+i.length+" unique characters. These characters were not unique: "+t.join(", "));n=e,a()}}else n!==i&&(n=i,a())}function l(){return s||(s=function(){n||c(i);for(var e,t=n.split(""),r=[],o=u.nextValue();t.length>0;)o=u.nextValue(),e=Math.floor(o*t.length),r.push(t.splice(e,1)[0]);return r.join("")}())}e.exports={get:function(){return n||i},characters:function(e){return c(e),n},seed:function(e){u.seed(e),o!==e&&(a(),o=e)},lookup:function(e){return l()[e]},shuffled:l}},480:(e,t,r)=>{"use strict";var n,o,s=r(8416);r(9829),e.exports=function(e){var t="",r=Math.floor(.001*(Date.now()-1567752802062));return r===o?n++:(n=0,o=r),t+=s(7),t+=s(e),n>0&&(t+=s(n)),t+s(r)}},8416:(e,t,r)=>{"use strict";var n=r(9829),o=r(3766),s=r(296);e.exports=function(e){for(var t,r=0,u="";!t;)u+=s(o,n.get(),1),t=e<Math.pow(16,r+1),r++;return u}},5607:(e,t,r)=>{"use strict";var n=r(9829),o=r(480),s=r(1082),u=r(5636)||0;function i(){return o(u)}e.exports=i,e.exports.generate=i,e.exports.seed=function(t){return n.seed(t),e.exports},e.exports.worker=function(t){return u=t,e.exports},e.exports.characters=function(e){return void 0!==e&&n.characters(e),n.shuffled()},e.exports.isValid=s},1082:(e,t,r)=>{"use strict";var n=r(9829);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6||new RegExp("[^"+n.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e))}},3766:e=>{"use strict";var t,r="object"==typeof window&&(window.crypto||window.msCrypto);t=r&&r.getRandomValues?function(e){return r.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],r=0;r<e;r++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},8946:e=>{"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},5636:e=>{"use strict";e.exports=0},296:e=>{e.exports=function(e,t,r){for(var n=(2<<Math.log(t.length-1)/Math.LN2)-1,o=-~(1.6*n*r/t.length),s="";;)for(var u=e(o),i=o;i--;)if((s+=t[u[i]&n]||"").length===+r)return s}},9196:e=>{"use strict";e.exports=window.React}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{GLOBAL_SESSION_ID:()=>e.GLOBAL_SESSION_ID,SESSION_STORE_KEY:()=>e.SESSION_STORE_KEY,useBlocksOwnerDocument:()=>v,useCurrentPageBodyClasses:()=>m,useCurrentPageTitle:()=>P,useEditorIsLoadedChanged:()=>y,useGetGlobalSessionProp:()=>w,useGlobalSessionProp:()=>_,useOwnerDocumentChanged:()=>O,useSessionProp:()=>g,useSetGlobalSessionProp:()=>h,useSetPageTitle:()=>x,withBlocksOwnerDocument:()=>b,withSessionProps:()=>E});const e=window.kubio.constants,t=window.kubio.coreHooks,o=window.wp.compose,s=window.wp.data,u=window.wp.element,i=window.wp.i18n,a=window.wp.url,c=window.lodash;var l=r(9590),f=r.n(l),p=r(4670),d=r(5893);const S={};(0,s.registerStore)(e.SESSION_STORE_KEY,{reducer:(e=S,{type:t,clientId:r,prop:n,value:o})=>{if("SET_PROP"===t){const t="kubio-dummy-value"+(0,p.generate)(),s=(0,c.get)(e,`${r}.${n}`,t);if(s===t||!f()(s,o)){const t=(0,c.set)(e,`${r}.${n}`,o);return{...(0,c.merge)({},e,t)}}return e}},actions:{setProp:(e,t,r)=>({type:"SET_PROP",clientId:e,prop:t,value:r})},selectors:{getProp:(e,t,r,n)=>t?(0,c.get)(e,`${t}.${r}`,n):n}});const g=(t,r,n=null)=>{const o=(0,s.useSelect)((o=>o(e.SESSION_STORE_KEY).getProp(t,r,n)),[]),{setProp:i}=(0,s.useDispatch)(e.SESSION_STORE_KEY);return(0,u.useMemo)((()=>[o,o=>{const u=(0,s.select)(e.SESSION_STORE_KEY).getProp(t,r,n);(0,c.isFunction)(o)&&(o=o(u)),f()(u,o)||i(t,r,o)}]),[t,n,r,i,o])},h=t=>{const[,r]=g(e.GLOBAL_SESSION_ID,t);return r},w=(t,r=null)=>{const[n]=g(e.GLOBAL_SESSION_ID,t,r);return n},_=(t,r=null)=>g(e.GLOBAL_SESSION_ID,t,r),v=()=>w("blocksOwnerDocument",window.document),y=(e=c.noop)=>{const t=w("ready",!1),[r,n]=(0,u.useState)(null);(0,u.useEffect)((()=>{if(null===r||t!==r)return n(r),e(t)}),[t])},O=(e=c.noop)=>{const t=v(),r=(0,u.useRef)(null);(0,u.useEffect)((()=>{if(!r.current||!t.isSameNode(r.current))return r.current=t,e(t)}),[t])},E=()=>(0,o.createHigherOrderComponent)((t=>r=>{const{clientId:n}=r,{getProp:o}=(0,s.useSelect)((t=>t(e.SESSION_STORE_KEY)),[n]),{setProp:u}=(0,s.useDispatch)(e.SESSION_STORE_KEY),i={getValue:(e,t)=>o(n,e,t),setValue:(e,t)=>u(n,e,t)};return(0,d.jsx)(t,{...r,sessionProps:i})}),"withSessionProps"),b=()=>(0,o.createHigherOrderComponent)((e=>t=>{const r=v();return(0,d.jsx)(e,{...t,ownerDocument:r})}),"withBlocksOwnerDocument"),m=()=>{const t=(0,s.useSelect)((t=>{var r;return null===(r=t(e.STORE_KEY).getPage())||void 0===r?void 0:r.path}),[]),[r,n]=_("pagesClasses",{}),o=w("ready",!1);return(0,u.useEffect)((()=>{!o||!t||null!=r&&r[t]||(n({...r,[t]:[]}),window.fetch((0,a.addQueryArgs)(t,{"__kubio-body-class":1})).then((e=>e.json())).then((e=>{var o,s;(0,c.isArray)(null==e||null===(o=e.data)||void 0===o?void 0:o.bodyClass)&&n({...r,[t]:null==e||null===(s=e.data)||void 0===s?void 0:s.bodyClass})})))}),[o,t,n,r]),(0,u.useMemo)((()=>(null==r?void 0:r[t])||[]),[r,t])},x=()=>{const[e,t]=_("pagesTitles",{});return(r,n)=>t({...e,[r]:{title:n,isLoading:!1}})},P=(r={type:"placeholder",title:(0,i.__)("Page title placeholder","kubio")})=>{const n=(0,s.useSelect)((t=>{var r,n;return null===(r=t(e.STORE_KEY))||void 0===r||null===(n=r.getPage())||void 0===n?void 0:n.path}),[]),[o,c]=_("pagesTitles",{}),l=w("ready",!1);(0,t.useEffectAsync)((async()=>{var e;!l||!n||null!=o&&o[n]||null!==(e=o[n])&&void 0!==e&&e.isLoading||(c({...o,[n]:{isLoading:!0}}),window.fetch((0,a.addQueryArgs)(n,{"__kubio-page-title":1})).then((e=>e.json())).then((e=>{e.data&&c({...o,[n]:{...e.data,isLoading:!1}})})))}),[l,n,o,c]);const f=(0,u.useMemo)((()=>{const e=null==o?void 0:o[n];return!e||e.isLoading?r:e}),[o,n,r]);return null!=f?f:(0,i.__)("Page","kubio")}})(),(window.kubio=window.kubio||{}).editorData=n})();
